{% load staticfiles app_filters %}

{% block content %}
<div class="register-header">
<h2>Register Team</h2>
</div>
<form method="post" class="team-form">
    {% csrf_token %}
    {% for field in form %}
      {% if field.errors %}
      <!-- check for form errors -->
        {% for error in field.errors %}
            <div class="alert alert-danger"><strong>{{ error }}</strong></div>
        {% endfor %}
      {% endif %}
    {% endfor %}
    {% for field in form %}
    <div class="form-group row">
      <label for="{{ field.name }}" class="col-2 col-form-label {{ field|required }} ">{{ field.name|title }}</label>
      <div class="col-10">
        {% if field.name != 'server' %}
        <input name="{{ field.name }}" id="{{ field.name }}" class="form-control" type="text" {{ field|required }}>
        {% else %}
        <select name="{{ field.name }}" id="{{ field.name }}" class="form-control" {{ field|required }}>
          <option value="" disabled selected ></option>
          <option value="1">Radius</option>
          <option value="2">Pi</option>
          <option value="3">Origin</option>
          <option value="4">Sphere</option>
          <option value="5">Centra</option>
          <option value="6">Orbit</option>
          <option value="7">Chord</option>
          <option value="8">Diameter</option>
          <option value="9">Any</option>
        </select>
        {% endif %}
      </div>
    </div>
    {% endfor %}
    <input class="form-submit" type="submit" value="Submit" />
</form>
<script type="text/javascript">var submitted=false;</script>
<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload="if(submitted)  {window.location='{% url 'team' user.team %}';}"></iframe>

<form action="https://docs.google.com/forms/d/e/1FAIpQLSc_siAwbZwzYHaDyzYgDvXkLaI5U0iGK_Er-rV6xFlyE8Q_zg/formResponse" id="google-form" style="display:none;" method="post" target="hidden_iframe" onsubmit="submitted=true;">
    <input name="entry.1110233876" id="google_name" class="form-control" type="text" required>
    <input name="entry.979285315" id="google_captain" class="form-control" type="text" >
    <input name="entry.904240137" id="google_player1" class="form-control" type="text" >
    <input name="entry.1088822964" id="google_player2" class="form-control" type="text" >
    <input name="entry.1974847324" id="google_player3" class="form-control" type="text">
    <input name="entry.811901964" id="google_player4" class="form-control" type="text">
    <input name="entry.1420361439" id="google_server" class="form-control" type="text">
</form>

<script>
$(document).ready(function(e){
  $('.team-form').on("submit",function(){
    $('#google_name').val($('#name').val())
    $('#google_captain').val($('#captain').val())
    $('#google_player1').val($('#player1').val())
    $('#google_player2').val($('#player2').val())
    $('#google_player3').val($('#player3').val())
    $('#google_player4').val($('#player4').val())
    $('#google_server').val($('#server option:selected').text())
    $("#google-form").submit();
  });
});
</script>
{% endblock %}
